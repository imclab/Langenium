{"ts":1363623154017,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"function handleParticles(delta){\n\tparticle_systems.forEach(function(particle_system,index){\n\t\tparticle_system._lifetime += delta;\n\t\tparticle_system.sortParticles = true;\n\t\tparticle_system.material.color.r -= Math.random()*.001;\n\t\tparticle_system.material.color.g += Math.random()*.001;\n\t\tif (particle_system.material.opacity > 0){\n\t\tparticle_system.material.opacity *= .99;\n\t\t}\n\t\t\tparticle_system.geometry.vertices.forEach(function(particle,index){\n\t\t\t  particle.x += Math.random() * particle_system.max - particle_system.min;\n\t\t\t  particle.y += Math.random() * particle_system.max - particle_system.min;\n\t\t\t  particle.z += Math.random() * particle_system.max - particle_system.min;\n\t\t});\n\t\tparticle_system.geometry.__dirtyVertices = true;\n\t\tif (particle_system._lifetime > 1.57) {\n\t\t\tscene.remove(particle_system);\n\t\t\tparticle_systems.splice(index,1);\n\t\t}\n\t});\n}\n  \nfunction teleportEffect(position){\n\t\tvar particleCount = 1000,\n\t\t\t\tparticles = new THREE.Geometry(),\n\t\t\t\tpMaterial =\n\t\t\t\t  new THREE.ParticleBasicMaterial({\n\t\t\t\t\tmap: THREE.ImageUtils.loadTexture(\"assets/particle.png?nocache\"),\n\t\t\t\t\tsize: .5,\n\t\t\t\t\tblending: THREE.AdditiveBlending,\n\t\t\t\t\ttransparent: true\n\t\t\t\t  });\n\n\t\t\t// now create the individual particles\n\t\t\tfor(var p = 0; p < particleCount; p++) {\n\t\t\t\t// create a particle with random\n\t\t\t\t// position values, -250 -> 250\n\t\t\t\tvar pX = position.x + Math.random() * 2 - 1.25,\n\t\t\t\t  pY = position.y + Math.random() * 2 - 1.25,\n\t\t\t\t  pZ = position.z + Math.random() * 2 - 1.25,\n\t\t\t\t  particle = new THREE.Vector3(pX, pY, pZ);\n\t\t\t\t// add it to the geometry\n\t\t\t\tparticles.vertices.push(particle);\n\t\t\t}\n\n\t\t\t// create the particle system\n\t\t\tvar particle_system = new THREE.ParticleSystem(particles, pMaterial);\t\n\t\t\tparticle_system.max = 16;\n\t\t\tparticle_system.min = 8;\n\t\t\tparticle_system._lifetime = -2;\n\t\t\tparticle_system.sortParticles = true;\n\t\t\tparticle_systems.push(particle_system);\n\t\t\t// add it to the scene\n\t\t\tscene.add(particle_systems[particle_systems.length-1]);\n}\n\nfunction cloudEffect(position){\n\t\tvar particleCount = 500,\n\t\t\t\tparticles = new THREE.Geometry(),\n\t\t\t\tpMaterial =\n\t\t\t\t  new THREE.ParticleBasicMaterial({\n\t\t\t\t  transparent: true,\n\t\t\t\t\tmap: THREE.ImageUtils.loadTexture(\"assets/cloud10.png?nocache\"),\n\t\t\t\t\tsize: 512\n\t\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t  });\n\n\t\t\t// now create the individual particles\n\t\t\tfor(var p = 0; p < particleCount; p++) {\n\t\t\t\t// create a particle with random\n\t\t\t\t// position values, -250 -> 250\n\t\t\t\tvar pX = position.x + Math.tan(Math.random() * Math.PI) * 1000,\n\t\t\t\t  pY = position.y + Math.random() * 1500 - 5000,\n\t\t\t\t  pZ = position.z + Math.tan(Math.random()  * Math.PI) * 1000,\n\t\t\t\t  particle = new THREE.Vector3(pX, pY, pZ);\n\t\t\t\t// add it to the geometry\n\t\t\t\tparticles.vertices.push(particle);\n\t\t\t}\n\n\t\t\t// create the particle system\n\t\t\tvar particle_system = new THREE.ParticleSystem(particles, pMaterial);\t\n\t\t\tparticle_system.max = 16;\n\t\t\tparticle_system.min = 8;\n\t\t\tparticle_system._lifetime = -2;\n\t\t\tparticle_system.sortParticles = true;\n\n\t\t\t// add it to the scene\n\t\t\tscene.add(particle_system);\n}\n"]],"start1":0,"start2":0,"length1":0,"length2":3044}]],"length":3044}
